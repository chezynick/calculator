<!DOCTYPE html>
<html lang = "en-UK">
<head>
    <meta charset = "UTF-8">
    <title>Calculator</title>
    <link rel = "stylesheet"
          type ="text/css"
          href = "style.css" />

</head>
<body>
    <div id="container">
        <div id ='textArea'  type= 'text'  rows='1' columns='8' maxlength = '8'></div>
        <form id ="mainKeys">
            <div class = 'number' type='button' >1</div>    
            <div class = 'number' type='button' >2</div> 
            <div class = 'number' type='button' >3</div> 
            <div class = 'number' type='button' >4</div> 
            <div class = 'number' type='button' >5</div> 
            <div class = 'number' type='button' >6</div> 
            <div class = 'number' type='button' >7</div> 
            <div class = 'number' type='button' >8</div> 
            <div class = 'number' type='button' >9</div> 
            <div class = 'button' id='clear' type='button' value = 'AC'>AC</div>
            <div   class = 'number'  id='number0' type='button' >0</div> 
            <div class = 'button' id = 'decimal' type='button' >.</div>
            <div  class = 'button'id = 'random' type='button' value = '??'>??</div>
            <div class = 'button' id = 'percentage' type='button' value = '%'>%</div>
            <div class = 'button' id= 'squareRoot' type='button' value = 'SqRt'>SqRt</div>
            
        </form>
        <form id ="sideKeys">
            <div class = 'operator button' type='button' id = 'plus' value = '+'>+</div>
            <div class = 'operator button' type='button' id = 'minus' value = '-'>-</div>
            <div class = 'operator button' type='button' id='divide' value = '/'>/</div>
            <div class = 'operator button' type='button' id = 'multiply' value  = 'X'>X</div>
            <div class = 'button' type='button' id='equals' >=</div>
        </form>
    </div>
    <script>
    //get textarea and set to output
        const divOutput = document.getElementById('textArea');

    //add variables for sums
    let a = 0;
    let b = 0;

        //add number functions
let sum = [];
      let numBut = document.querySelectorAll('.number');
      for(i=0;i <numBut.length;i++){
          numBut[i].addEventListener('click', function(){
              if(divOutput.innerText.length <= 7){
                  divOutput.innerText += this.innerHTML; 
              };
          });
      };
//add plus button funct
//create array to store numbers entered
        
//createevent listener for all operator class buttons
        let operator = document.querySelectorAll('.operator');
//loop through operator buttons for event listener
        for(i=0;i<operator.length;i++){
          operator[i].addEventListener('click', function(){
//add conditional dependant upon sum array length
        if(sum.length <=1){    
            sum = [];          
              sum.push (Number(divOutput.innerText));
              divOutput.innerText = '';
              sum.push (this.innerText);
              
//add operator conditions
        } else  {
            if (sum[1] === '+'){
            sum.push (Number(divOutput.innerText));
            divOutput.innerText = '';
            let result = sum[0] + sum[2];
            sum = [];
            sum.push (result);
            sum.push (this.innerText);
            console.log(sum[0]);
        } else if (sum[1] === '-'){
            sum.push (Number(divOutput.innerText));
            divOutput.innerText = '';
            let result = sum[0] - sum[2];
            sum = [];
            sum.push (result);
            sum.push (this.innerText);
            console.log(sum[0]);
        } else if (sum[1] === 'X'){
            sum.push (Number(divOutput.innerText));
            divOutput.innerText = '';
            let result = sum[0] * sum[2];
            sum = [];
            sum.push (result);
            sum.push (this.innerText);
            console.log(sum[0]);
        } else if (sum[1] === '/'){
            sum.push (Number(divOutput.innerText));
            divOutput.innerText = '';
            let result = sum[0] / sum[2];
            sum = [];
            sum.push (result);
            sum.push (this.innerText);
            console.log(sum[0]);
            
     
        };
        };     
//add equals function
    let finalResult = document.getElementById('equals').addEventListener('click', function() {
        if (sum.length == 1){
console.log(sum[0])
        } else if (sum[1] === '+'){
            sum.push (Number(divOutput.innerText));
            let result = sum[0] + sum[2];
            sum = [];
            sum.push (result); 
            if (result.length >3){
                console.log('too big')
            }
            divOutput.innerText = sum[0];
        } else if (sum[1] === '-'){
            sum.push (Number(divOutput.innerText));
            let result = sum[0] - sum[2];
            sum = [];
            sum.push (result);
            divOutput.innerText = sum[0];
        } else if (sum[1] === 'X'){
            sum.push (Number(divOutput.innerText));
            let result = sum[0] * sum[2];
            sum = [];
            sum.push (result);
            divOutput.innerText = sum[0];
        } else if (sum[1] === '/'){
            sum.push (Number(divOutput.innerText));
            let result = sum[0] / sum[2];
            sum = [];
            sum.push (result);
            divOutput.innerText = sum[0];
            };              
            });   
            });  
            };     
 //stand alone button functions       
//random button function
document.getElementById('random').addEventListener('click',function(){
    var x = Math. floor(Math. random() * 256);
    var y = Math. floor(Math. random() * 256);
     var z = Math. floor(Math. random() * 256);
    var bgColor = "rgb(" + x + "," + y + "," + z + ")";
    let container = document.getElementById('container');
    container.style.backgroundColor = bgColor; 
});

//percentage button fuction
document.getElementById('percentage').addEventListener('click',function(){
        a = divOutput.innerText;
        divOutput.innerText = (Number(a) / 100);
});

//add square root buttonfunction
document.getElementById('squareRoot').addEventListener('click',function(){
        a = divOutput.innerText;
        divOutput.innerText = (Number(a) * Number(a)).toString();
});

//add clear button functionality
document.getElementById('clear').addEventListener('click',function(){
        document.location.reload();
}); 

//add decimal button functionality
document.getElementById('decimal').addEventListener('click', function(){
    let ifDecimal = divOutput.innerText.lastIndexOf('.')
//condition to stop more than 1 decimal being entered
    if (ifDecimal === -1){
        divOutput.innerText += '.'
    };
});
          
    </script>
</body>
</html>